# Focus App UI Design Specification

> **设计风格**：Clean / Minimalist UI  
> **设计理念**：注重留白和圆角，使用冷色调传达"专注"和"冷静"的心理暗示  
> **更新日期**：2025-12-17

---

## 目录
1. [交互逻辑梳理](#1-交互逻辑梳理)
2. [颜色规范](#2-颜色规范)
3. [形状与组件](#3-形状与组件)
4. [布局与定位](#4-布局与定位)
5. [字体排印](#5-字体排印)
6. [动画与过渡](#6-动画与过渡)
7. [响应式适配](#7-响应式适配)

---

## 1. 交互逻辑梳理

整个应用的核心逻辑流转分为四大模块：**任务管理**、**专注计时**、**历史记录**、**全局设置**。

### 1.1 任务管理流程 (Task Management Flow)

#### 初始状态 (Home - Empty State)
- **场景**：用户首次进入或删除所有任务后
- **展示内容**：
  - 空白占位图（建议使用📝 emoji或简洁插图）
  - 提示语："No tasks yet..."
  - 引导文案："Tap + to create your first task"
- **操作入口**：
  - 右下角悬浮操作按钮（FAB）显示 **"+"** 号
  - 颜色：皇家蓝 `#2F54EB`
  - 阴影：明显投影，强调可点击性

#### 创建任务 (Create Task)
- **触发方式**：
  - 点击 FAB "+" 按钮
  - 从首页进入"New Task"页面
  
- **页面结构**：
  ```
  ┌─────────────────────────────┐
  │ ← Back          New Task    │  ← Header
  ├─────────────────────────────┤
  │                             │
  │  Task Name * ___________    │  ← 必填字段
  │                             │
  │  Task Description           │  ← 选填字段
  │  _______________________    │
  │  _______________________    │
  │                             │
  │  [ Create ]                 │  ← 主按钮（皇家蓝）
  │                             │
  │  Start without a task       │  ← 次要按钮（文字链接）
  └─────────────────────────────┘
  ```

- **输入规则**：
  - **Task Name**（必填）：
    - 最大长度：60字符
    - 错误提示："Task name is required (max 60 chars)"
  - **Task Description**（选填）：
    - 最大长度：200字符
    - Placeholder: "Add notes or details..."

- **分支操作**：
  1. **点击 "Create"**：
     - 验证表单 → 保存任务到 TaskStore
     - 成功：Toast "Task created" + 返回首页列表
     - 失败：显示错误提示
  
  2. **点击 "Start without a task"**：
     - 不保存任务名
     - 直接跳转至 StartPage（启动配置页）
     - 会话标记为"匿名专注"
  
  3. **点击左上角 "Back" 箭头**：
     - 若有未保存内容，弹出确认对话框："Discard changes?"
     - 确认后返回首页

#### 任务列表 (To-Do List)
- **卡片结构**：
  ```
  ┌────────────────────────────────┐
  │ Task Title              [▶]   │  ← 绿色播放按钮
  │ 0 min focused           [📝]   │  ← 次要信息+编辑图标
  └────────────────────────────────┘
  ```

- **卡片交互**：
  1. **点击绿色播放按钮 ▶**（普通任务）：
     - 直接进入 StartPage（准备专注页面）
     - 传递 `taskId` 参数
     - 页面顶部显示任务名称和描述
  
  2. **点击紫色咖啡图标 ☕**（活动任务）：
     - **识别条件**：task.activeSessionId !== null（有未完成的活动会话）
     - **图标颜色**：`#B37FEB`（渐变紫）
     - **行为**：直接跳转到 TimerPage，恢复活动会话
     - **动画**：脉动效果，提醒用户有正在进行的会话
  
  3. **点击卡片主体**：
     - 进入 TaskEditPage（任务编辑/详情页）
     - 可修改标题、描述
     - 可删除任务（需二次确认）
  
  3. **长按卡片**：
     - 显示快捷菜单：Edit | Delete | Start Focus
     - Delete 需二次确认："Delete this task?"

- **视觉状态**：
  - **默认状态**：白色背景 `#FFFFFF`，浅灰阴影
  - **按下状态**：背景变为 `#F5F7FA`（浅灰）
  - **播放按钮**：
    - 背景：薄荷绿渐变 `#E6FFEB` → `#B7EB8F`
    - 图标：深绿 `#389E0D`
    - 圆形按钮，直径 48dp

---

### 1.2 专注计时流程 (Focus Session Flow)

#### 准备阶段 (Setup - StartPage)
- **页面布局**：
  ```
  ┌─────────────────────────────────┐
  │ ← Back                          │  ← Header
  │                                 │
  │      Task Name / Anonymous      │  ← 任务标识
  │      Task Description...        │
  ├─────────────────────────────────┤
  │                                 │
  │         ┌─────────┐             │
  │         │  0:00   │             │  ← 大圆形（静态显示）
  │         │         │             │
  │         └─────────┘             │
  │                                 │
  │  Countdown Mode  [ ] OFF/ON     │  ← 模式切换开关
  │                                 │
  │  Duration: [25▾] [45▾] [60▾]    │  ← 时长快选（仅倒计时）
  │                                 │
  ├─────────────────────────────────┤
  │                                 │
  │  [ Start Focus Session ]        │  ← 主按钮（皇家蓝）
  │                                 │
  │  ┌─────────────┐ ┌─────────────┐│
  │  │Rest Count: 0│ │Focus: 0 min ││  ← 统计卡片
  │  └─────────────┘ └─────────────┘│
  └─────────────────────────────────┘
  ```

- **交互元素**：
  1. **Countdown Mode 开关**：
     - OFF（正计时）：无时间限制，手动结束
     - ON（倒计时）：显示时长选择器，到点自动结束
  
  2. **Duration 快选按钮**：
     - 仅在倒计时模式下显示
     - 预设选项：25分钟、45分钟、60分钟
     - 选中状态：皇家蓝背景 `#2F54EB` + 白色文字
     - 未选中：白色背景 + 灰色边框
  
  3. **统计卡片**：
     - 显示历史数据：休息次数、累计专注时长
     - 点击"View Detail"跳转到 HistoryPage

- **启动流程**：
  - 点击 "Start Focus Session"
  - 调用 `FocusStore.startFocus(taskId, options)`
  - 成功后：`router.replaceUrl('pages/FocusPage')`（替换当前页，防止返回）
  - 失败：Toast 错误信息

#### 进行阶段 (In Progress - FocusPage/TimerPage)
- **页面布局**：
  ```
  ┌─────────────────────────────────┐
  │ ← Back            [专注中]      │  ← Header + 状态标签
  ├─────────────────────────────────┤
  │                                 │
  │         ┌─────────┐             │
  │        ╱           ╲            │  ← 圆环进度（渐变紫）
  │       │   25:30    │            │  ← 大号计时器
  │        ╲   Focus   ╱            │
  │         └─────────┘             │
  │      Total: 25 min 30 sec       │  ← 辅助信息
  │                                 │
  ├─────────────────────────────────┤
  │  [ ⏸ Pause ]    [ ☕ Rest ]    │  ← 操作按钮行
  │                                 │
  │  [    Complete Session    ]     │  ← 结束按钮（深黑色）
  │                                 │
  │  View Detail ↑                  │  ← 底部抽屉入口
  └─────────────────────────────────┘
  ```

- **计时器状态**：
  1. **正计时模式**（RUNNING）：
     - 数字增长：00:00 → 25:30 → ...
     - 圆环：无进度环（或全圆静态显示）
     - 颜色：皇家蓝渐变
  
  2. **倒计时模式**（COUNTDOWN）：
     - 数字减少：25:00 → 24:59 → ... → 00:00
     - 圆环：进度环逐渐收缩（淡紫 → 深紫渐变）
     - 颜色：紫色渐变 `#9254DE` → `#531DAB`
     - 到点行为：自动触发 `finishFocus(reason='timeout')`
  
  3. **暂停状态**（PAUSED）：
     - 数字停止跳动
     - 状态标签：[已暂停]（背景变为灰色 `#8C8C8C`）
     - 按钮变化：Pause → Resume

- **操作按钮详解**：
  
  | 按钮 | 图标 | 颜色 | 功能 |
  |------|------|------|------|
  | **Pause** | ⏸ | 皇家蓝 `#2F54EB` | 暂停计时，弹出干扰原因输入框 |
  | **Resume** | ▶ | 皇家蓝 `#2F54EB` | 继续计时，创建新的 FocusSegment |
  | **Rest** | ☕ | 中灰 `#8C8C8C` | 进入休息模式（切换到 BreakTimer） |
  | **Complete** | ✓ | 深黑 `#1F1F1F` | 结束会话，记录总时长并返回首页 |

- **干扰原因对话框**（Interruption Dialog）：
  - **触发时机**：点击 Pause 或 Complete 按钮
  - **布局**：
    ```
    ┌─────────────────────────────────┐
    │  Why did you pause? (Optional)  │  ← 标题
    ├─────────────────────────────────┤
    │  [ e.g., Phone call, Bathroom ] │  ← 输入框
    │                                 │
    │  [Phone] [Bathroom] [Water]     │  ← 快捷选项
    │                                 │
    │  [ Cancel ]   [ Confirm ]       │  ← 按钮组
    └─────────────────────────────────┘
    ```
  - **快捷选项**：
    - 预设：Phone call、Bathroom、Water、Someone needs help
    - 点击后自动填入输入框
  - **确认后**：
    - 调用 `FocusStore.setInterruptionReason(reason)`
    - 执行暂停或结束操作

#### 休息模式 (Break Mode)
- **触发方式**：
  1. 手动点击"Rest"按钮
  2. 自动提醒（达到设定的休息间隔）

- **休息界面**：
  ```
  ┌─────────────────────────────────┐
  │           [休息中]              │  ← 状态标签（橙色）
  ├─────────────────────────────────┤
  │         ┌─────────┐             │
  │        ╱           ╲            │  ← 圆环进度（橙色渐变）
  │       │   04:35    │            │  ← 休息倒计时
  │        ╲   Rest    ╱            │
  │         └─────────┘             │
  │      Planned: 5 min             │  ← 预设时长
  │                                 │
  ├─────────────────────────────────┤
  │  [  End Break & Resume  ]       │  ← 提前结束按钮（皇家蓝）
  │                                 │
  │  [  Rest 5 More Minutes  ]      │  ← 延长按钮（浅灰）
  └─────────────────────────────────┘
  ```

- **休息结束**：
  - 倒计时到 00:00
  - 弹出提示："Break time's up! Ready to focus?"
  - 按钮：[Resume Now] / [Rest 5 More]
  - 点击 Resume 后自动调用 `resumeFocus()`

#### 底部详情抽屉 (Bottom Sheet)
- **触发**：点击"View Detail"
- **内容**：
  ```
  ┌─────────────────────────────────┐
  │              ───  ×             │  ← 手柄 + 关闭按钮
  ├─────────────────────────────────┤
  │  Session Details                │
  │                                 │
  │  Started: 14:30 PM              │
  │  Elapsed: 25 min 30 sec         │
  │  Breaks: 2 times (10 min)       │
  │  Segments: 3                    │
  │                                 │
  │  ┌─ Segment 1 ──────────────┐  │
  │  │ 14:30 - 14:50 (20 min)   │  │
  │  └──────────────────────────┘  │
  │  ┌─ Break 1 ─────────────────┐ │
  │  │ 14:50 - 14:55 (5 min)    │  │
  │  └──────────────────────────┘  │
  │  ┌─ Segment 2 ──────────────┐  │
  │  │ 14:55 - 15:00 (5 min)    │  │
  │  └──────────────────────────┘  │
  └─────────────────────────────────┘
  ```
- **交互**：
  - 向下滑动关闭
  - 点击遮罩层关闭
  - 点击右上角 × 关闭

---

### 1.3 历史记录与统计 (History & Analytics)

#### 历史页面结构
```
┌─────────────────────────────────┐
│          History                │  ← 页面标题
├─────────────────────────────────┤
│  Filter: [All Tasks ▾]  [📅]   │  ← 筛选器
├─────────────────────────────────┤
│                                 │
│  ┌─ Today ─────────────────┐   │
│  │ 2h 30min focused         │   │  ← 日期分组
│  │ 3 sessions, 2 breaks     │   │
│  └──────────────────────────┘   │
│                                 │
│  ┌─────────────────────────┐   │
│  │ Task: Learn ArkTS       │   │  ← 会话卡片
│  │ 25 min  |  14:30-14:55  │   │
│  │ 1 break  [View Detail]  │   │
│  └─────────────────────────┘   │
│                                 │
│  ┌─ Yesterday ─────────────┐   │
│  │ 1h 45min focused         │   │
│  │ 2 sessions, 1 break      │   │
│  └──────────────────────────┘   │
│                                 │
│  ...                            │
└─────────────────────────────────┘
```

#### 筛选机制
1. **按任务筛选**：
   - 顶部下拉菜单（默认"All Tasks"）
   - 显示所有任务列表
   - 选中后仅显示该任务的会话记录

2. **按日期筛选**：
   - 点击日历图标 📅
   - 弹出日期选择器
   - 可选择单日或日期范围
   - 默认显示最近7天

3. **空状态**：
   - 无数据时显示："No focus sessions yet"
   - 引导文案："Complete your first focus session to see stats here"

#### 图表展示（可选功能）
- **时间分布图**（Hourly Distribution）：
  - 横轴：时间段（00:00-23:59）
  - 纵轴：专注分钟数
  - 柱状图，颜色：皇家蓝渐变
- **任务占比饼图**：
  - 显示各任务的专注时长占比
  - 颜色：自动生成互补色

---

### 1.4 设置 (Settings)

#### 设置页面结构
```
┌─────────────────────────────────┐
│          Settings               │
├─────────────────────────────────┤
│  Notifications                  │
│  Enable reminders    [ ] ON     │  ← 通知开关
│                                 │
│  Focus Settings                 │
│  Default duration    [25] min   │  ← 数字输入框
│                                 │
│  Break Settings                 │
│  Rest duration       [5] min    │
│  Rest interval       [25] min   │  ← 专注多久后提醒休息
│                                 │
│  Advanced                       │
│  Auto-extend break   [ ] OFF    │  ← 自动延长休息
│  Export data         →          │  ← 数据导出（占位）
│                                 │
│  About                          │
│  Version 1.0.0                  │
│  Privacy Policy      →          │
└─────────────────────────────────┘
```

#### 设置项详解
| 设置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| Enable reminders | Switch | ON | 总开关，关闭后禁用所有通知 |
| Default duration | Number | 25 min | 倒计时模式的默认时长 |
| Rest duration | Number | 5 min | 休息的默认时长 |
| Rest interval | Number | 25 min | 专注多久后提醒休息 |
| Auto-extend break | Switch | OFF | 休息结束后是否自动延长 |

---

## 2. 颜色规范

### 2.1 主色调 (Primary Color)
- **皇家蓝 (Royal Blue)**：`#2F54EB`
  - **用途**：主要按钮（Create, Start, Complete）、选中状态、FAB 背景、进度环（专注模式）
  - **HEX**：`#2F54EB`
  - **RGB**：`rgb(47, 84, 235)`
  - **CMYK**：`C=80, M=64, Y=0, K=8`
  - **色彩心理**：专注、冷静、可信赖

### 2.2 辅助色 (Secondary/Accent Colors)

#### 浅灰/背景色 (Light Grey)
- **HEX**：`#F5F7FA`
- **用途**：App 整体背景、卡片按下状态、次要区域
- **对比度**：与纯白形成微妙层次感

#### 纯白 (White)
- **HEX**：`#FFFFFF`
- **用途**：卡片背景、输入框背景、底部导航栏背景、弹窗背景
- **阴影**：配合轻微阴影增强悬浮感

#### 薄荷绿 (Mint Green)
- **背景色**：`#E6FFEB`（淡绿）
- **图标色**：`#389E0D`（深绿）
- **用途**：任务列表中的"开始/播放"按钮
- **色彩心理**：行动、开始、生机

#### 渐变紫 (Gradient Purple)
- **起始色**：`#B37FEB`（淡紫）
- **终止色**：`#531DAB`（深紫）
- **用途**：倒计时模式的圆环进度条
- **渐变方向**：线性，从左上到右下（135deg）

#### 橙色/警告色 (Orange)
- **HEX**：`#FA8C16`
- **用途**：休息模式状态标签、休息圆环进度
- **色彩心理**：放松、温暖、提示

### 2.3 文本颜色 (Typography Colors)

#### 深黑/标题 (Dark Grey)
- **HEX**：`#1F1F1F`
- **用途**：标题（H1, H2）、主要数字（计时器）、重要文本
- **字重**：Bold（700）

#### 中灰/正文 (Medium Grey)
- **HEX**：`#8C8C8C`
- **用途**：描述文本、占位符（Placeholder）、次要标签、辅助信息
- **字重**：Regular（400）

#### 浅灰/禁用 (Light Grey)
- **HEX**：`#BFBFBF`
- **用途**：禁用状态文本、分割线
- **字重**：Light（300）

### 2.4 语义化颜色 (Semantic Colors)

| 语义 | 颜色 | HEX | 用途 |
|------|------|-----|------|
| 成功 (Success) | 绿色 | `#52C41A` | 成功 Toast、完成状态 |
| 错误 (Error) | 红色 | `#F5222D` | 错误提示、删除确认 |
| 警告 (Warning) | 橙色 | `#FA8C16` | 警告提示、休息模式 |
| 信息 (Info) | 蓝色 | `#1890FF` | 信息提示、链接文本 |

### 2.5 颜色使用规则
1. **对比度要求**：
   - 正文文本与背景对比度 ≥ 4.5:1
   - 标题文本与背景对比度 ≥ 3:1
   - 按钮文本与按钮背景对比度 ≥ 4.5:1

2. **颜色层级**：
   - 主要操作：皇家蓝 `#2F54EB`
   - 次要操作：中灰 `#8C8C8C`
   - 危险操作：红色 `#F5222D`

3. **深色模式适配**（可选）：
   - 背景：深黑 `#1F1F1F` → 浅灰 `#262626`
   - 卡片：白色 `#FFFFFF` → 深灰 `#2F2F2F`
   - 文本：深黑 `#1F1F1F` → 白色 `#FFFFFF`

---

## 3. 形状与组件

### 3.1 圆角 (Border Radius)

#### 卡片与输入框
- **圆角大小**：`12px - 16px`（中等圆角）
- **适用组件**：
  - 任务卡片
  - 输入框（TextInput）
  - 白色容器
  - 对话框

#### 按钮
- **主要按钮**（Primary Button）：
  - 圆角：`28px`（全圆角 / Pill shape）
  - 高度：`56dp`
  - 示例：Start Focus Session、Complete
  
- **次要按钮**（Secondary Button）：
  - 圆角：`24px`
  - 高度：`48dp`
  - 示例：Cancel、Confirm

#### 计时器圆形
- **形状**：完美正圆（Circle）
- **直径**：`280dp`（手机端）、`320dp`（平板端）
- **边框**：无边框，纯填充或进度环

#### FAB（悬浮操作按钮）
- **形状**：正圆
- **直径**：`56dp`
- **图标大小**：`24dp`

### 3.2 阴影 (Shadows)

#### 轻阴影（卡片、输入框）
```css
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
```
- **垂直偏移**：2px
- **模糊半径**：8px
- **颜色**：黑色 8% 透明度

#### 中阴影（按钮 Hover）
```css
box-shadow: 0 4px 12px rgba(47, 84, 235, 0.2);
```
- **垂直偏移**：4px
- **模糊半径**：12px
- **颜色**：皇家蓝 20% 透明度

#### 重阴影（FAB、弹窗）
```css
box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
```
- **垂直偏移**：8px
- **模糊半径**：24px
- **颜色**：黑色 15% 透明度

### 3.3 组件尺寸规范

| 组件 | 宽度 | 高度 | 内边距 (Padding) | 外边距 (Margin) |
|------|------|------|------------------|-----------------|
| 任务卡片 | 100% - 24dp | 80dp | 16dp | 12dp top/bottom |
| 主要按钮 | 100% - 48dp | 56dp | 24dp left/right | 16dp bottom |
| 次要按钮 | auto | 48dp | 20dp left/right | 12dp top/bottom |
| 输入框 | 100% - 48dp | 48dp | 16dp | 8dp top/bottom |
| 底部导航栏 | 100% | 60dp | 8dp | 0 |
| 统计卡片 | (50% - 6dp) | 96dp | 16dp | 12dp gap |

---

## 4. 布局与定位

### 4.1 底部导航 (Bottom Navigation)

#### 结构与规范
- **固定位置**：屏幕底部
- **高度**：`60dp`
- **背景色**：纯白 `#FFFFFF`
- **上边框**：1px 浅灰线 `#E8E8E8`
- **阴影**：顶部轻阴影（向上投射）

#### 图标设计
- **图标数量**：3个（History, Home, Settings）
- **图标大小**：`24dp`
- **间距**：均匀分布（33.33% 宽度）
- **高亮状态**：
  - 选中：皇家蓝 `#2F54EB` + 底部指示条（2dp 高，蓝色）
  - 未选中：中灰 `#8C8C8C`

#### 交互反馈
- **点击效果**：Ripple 波纹动画（蓝色 10% 透明度）
- **页面切换**：使用 `router.replaceUrl()` 避免堆栈重复

### 4.2 卡片布局 (Cards)

#### 任务卡片
```
┌────────────────────────────────┐
│  [图标] Task Title        [▶] │  ← 左右布局
│         0 min | Created 2h ago │  ← 次要信息行
└────────────────────────────────┘
```
- **左侧区域**（70% 宽度）：
  - 任务标题（Bold, 16sp）
  - 次要信息（Regular, 12sp, 中灰色）
- **右侧区域**（30% 宽度）：
  - 播放按钮（绿色，48dp 圆形）
  - 垂直居中对齐

#### 统计卡片
```
┌─────────────────┐ ┌─────────────────┐
│ Rest Count      │ │ Focus Time      │
│ 3 times         │ │ 2h 30min        │
└─────────────────┘ └─────────────────┘
```
- **并排布局**：Row 容器，gap = 12dp
- **宽度**：每个卡片占 50% - 6dp
- **内边距**：16dp
- **对齐方式**：
  - 标签：左上角（12sp, 中灰色）
  - 数值：左下角（16sp, Bold, 深黑色）

### 4.3 空状态 (Empty States)

#### 居中布局
```
┌─────────────────────────────────┐
│                                 │
│                                 │
│           📝                    │  ← 图标/插图
│                                 │
│       No tasks yet...           │  ← 主要文本
│                                 │
│   Tap + to create your first    │  ← 引导文本
│                                 │
│                                 │
└─────────────────────────────────┘
```
- **垂直居中**：使用 `justifyContent: FlexAlign.Center`
- **水平居中**：使用 `alignItems: HorizontalAlign.Center`
- **元素间距**：16dp

### 4.4 计时器页面 (Timer Page)

#### 中心化布局
- **计时器位置**：屏幕垂直中心偏上 10%
- **圆环直径**：280dp（占屏幕宽度约 70%）
- **操作按钮区**：屏幕下方 1/4 处
- **单手可达性**：主要按钮距离底部 80-120dp

#### 层级结构
```
Column (flex: 1)
  ├─ Header (fixed height: 56dp)
  ├─ Spacer (flex: 0.5)
  ├─ Timer Circle (fixed: 280dp)
  ├─ Spacer (flex: 1)
  ├─ Action Buttons (fixed height: 200dp)
  └─ Bottom Spacer (safe area: 40dp)
```

### 4.5 弹窗与遮罩 (Modals/Overlays)

#### 底部抽屉 (Bottom Sheet)
- **入场动画**：从底部滑入（300ms, ease-out）
- **高度**：最大 70vh（视口高度的 70%）
- **圆角**：顶部圆角 16px，底部无圆角
- **遮罩层**：
  - 背景色：黑色 60% 透明度 `rgba(0,0,0,0.6)`
  - 点击遮罩关闭
- **手柄**：
  - 宽度：40dp
  - 高度：4dp
  - 颜色：浅灰 `#D9D9D9`
  - 位置：顶部居中，距离顶部 12dp

#### 对话框 (Dialog)
- **位置**：屏幕中心
- **最大宽度**：320dp（手机）、400dp（平板）
- **圆角**：16px
- **内边距**：24dp
- **按钮布局**：
  - 单按钮：居中对齐
  - 双按钮：Row 布局，gap = 12dp

---

## 5. 字体排印

### 5.1 字体家族 (Font Family)
- **优先级**：
  1. HarmonyOS Sans（鸿蒙系统默认）
  2. SF Pro Display（iOS 备用）
  3. Roboto（Android 备用）
  4. System UI（系统默认）

### 5.2 字体层级 (Type Scale)

| 层级 | 字号 | 字重 | 行高 | 用途 |
|------|------|------|------|------|
| Display | 60sp | Medium (500) | 72sp | 计时器主数字 |
| H1 | 24sp | Bold (700) | 32sp | 页面标题 |
| H2 | 20sp | Bold (700) | 28sp | 卡片标题 |
| H3 | 18sp | SemiBold (600) | 24sp | 次级标题 |
| Body 1 | 16sp | Regular (400) | 24sp | 主要正文 |
| Body 2 | 14sp | Regular (400) | 20sp | 次要正文 |
| Caption | 12sp | Light (300) | 16sp | 辅助信息 |
| Button | 16sp | Medium (500) | 24sp | 按钮文本 |

### 5.3 字体使用规则

#### 标题 (Headers)
- **H1**：页面顶部标题（New Task, History, Settings）
  - 字号：24sp
  - 字重：Bold (700)
  - 颜色：深黑 `#1F1F1F`
  - 间距：下边距 24dp

- **H2**：卡片标题（任务名称）
  - 字号：20sp
  - 字重：Bold (700)
  - 颜色：深黑 `#1F1F1F`

#### 正文 (Body Text)
- **Body 1**：主要描述文本
  - 字号：16sp
  - 字重：Regular (400)
  - 颜色：深黑 `#1F1F1F`
  - 行高：1.5x（24sp）

- **Body 2**：次要描述文本
  - 字号：14sp
  - 字重：Regular (400)
  - 颜色：中灰 `#8C8C8C`
  - 行高：1.43x（20sp）

#### 辅助信息 (Caption)
- 字号：12sp
- 字重：Light (300)
- 颜色：中灰 `#8C8C8C`
- 用途：时间戳、统计数据、帮助提示

#### 计时器数字 (Display)
- 字号：60sp（默认）、48sp（小屏）
- 字重：Medium (500)
- 颜色：深黑 `#1F1F1F`
- 字体特性：
  - 等宽字体（Monospace）
  - 字符间距：-0.02em
  - 避免数字跳动

### 5.4 排版细节

#### 行高与间距
- **标题行高**：1.33x（如 24sp 标题 → 32sp 行高）
- **正文行高**：1.5x（如 16sp 正文 → 24sp 行高）
- **段落间距**：16dp - 24dp

#### 对齐方式
- **左对齐**：大部分文本（标题、正文、列表）
- **居中对齐**：空状态文本、对话框标题、按钮文本
- **右对齐**：数字统计、时间戳

#### 文本截断
- **单行截断**：
  - 使用 ellipsis（...）
  - 示例：任务标题过长时显示为 "Learn ArkTS and Har..."
- **多行截断**：
  - 最多 2-3 行
  - 使用 `maxLines` 属性

---

## 6. 动画与过渡

### 6.1 页面转场动画

#### 标准转场（Push/Pop）
- **动画类型**：Slide（滑动）
- **方向**：从右向左（Push），从左向右（Pop）
- **时长**：300ms
- **缓动函数**：`cubic-bezier(0.4, 0.0, 0.2, 1)` (ease-out)

#### Tab 切换
- **动画类型**：Fade（淡入淡出）
- **时长**：200ms
- **缓动函数**：`linear`

### 6.2 组件动画

#### 按钮点击（Ripple）
- **效果**：波纹扩散
- **颜色**：按钮颜色 10% 透明度
- **时长**：300ms
- **起始点**：点击坐标

#### FAB 展开（可选）
- **效果**：旋转 + 缩放
- **旋转角度**：0deg → 45deg（"+" 变 "×"）
- **缩放比例**：1.0 → 1.1 → 1.0
- **时长**：250ms

#### 底部抽屉
- **入场**：
  - 平移：Y(100%) → Y(0)
  - 遮罩：透明度 0 → 0.6
  - 时长：300ms
  - 缓动：ease-out
- **出场**：
  - 平移：Y(0) → Y(100%)
  - 遮罩：透明度 0.6 → 0
  - 时长：250ms
  - 缓动：ease-in

### 6.3 进度动画

#### 圆环进度（Progress Ring）
- **更新频率**：每秒 1 次（同步计时器刷新）
- **过渡效果**：
  - 动画类型：线性插值
  - 时长：1000ms（匹配计时器间隔）
  - 缓动：linear
- **颜色渐变**：
  - 专注模式：皇家蓝 `#2F54EB`
  - 倒计时模式：紫色渐变 `#B37FEB` → `#531DAB`
  - 休息模式：橙色渐变 `#FFD591` → `#FA8C16`

#### 计时器数字跳动
- **更新策略**：每秒更新一次，避免毫秒级闪烁
- **过渡效果**：
  - 动画类型：数字翻转（可选）
  - 时长：300ms
  - 缓动：ease-out

### 6.4 加载状态

#### 骨架屏（Skeleton）
- **适用场景**：任务列表加载、历史数据加载
- **效果**：
  - 灰色矩形块模拟内容
  - 渐变波光效果（从左到右扫过）
  - 动画时长：1500ms
  - 无限循环

#### 加载指示器（Loading Spinner）
- **样式**：圆形旋转器（皇家蓝）
- **大小**：32dp（默认）、24dp（小尺寸）
- **旋转速度**：1 秒/圈
- **位置**：屏幕中心或按钮内部

---

## 7. 响应式适配

### 7.1 屏幕尺寸断点

| 断点 | 宽度范围 | 设备类型 | 布局调整 |
|------|----------|----------|----------|
| Small | < 360dp | 小屏手机 | 单列布局，减小间距 |
| Medium | 360-600dp | 标准手机 | 默认布局 |
| Large | 600-840dp | 大屏手机/小平板 | 增大间距，扩展卡片 |
| X-Large | > 840dp | 平板/折叠屏 | 双列布局，侧边栏导航 |

### 7.2 适配策略

#### 字体缩放
- **基准字号**：16sp（Medium 屏幕）
- **缩放系数**：
  - Small：0.9x（14.4sp）
  - Medium：1.0x（16sp）
  - Large：1.1x（17.6sp）
  - X-Large：1.2x（19.2sp）

#### 计时器圆形
- **Small**：240dp
- **Medium**：280dp
- **Large**：320dp
- **X-Large**：360dp

#### 任务列表
- **Small/Medium**：单列
- **Large**：单列，卡片宽度固定 600dp 居中
- **X-Large**：双列，每列 400dp

### 7.3 安全区域（Safe Area）
- **顶部**：考虑状态栏（24dp）、刘海屏（40dp）
- **底部**：考虑手势条（34dp）、虚拟按键（48dp）
- **左右**：屏幕边缘预留 16dp

### 7.4 横屏适配（Landscape）
- **计时器页面**：
  - 左右布局：左侧圆形计时器，右侧操作按钮
  - 圆形尺寸减小至 200dp
- **底部导航栏**：
  - 保持底部位置，或切换为侧边栏（可选）

---

## 8. 交互细节与微动效

### 8.1 触觉反馈（Haptic Feedback）
| 场景 | 反馈类型 | 强度 |
|------|----------|------|
| 按钮点击 | 轻触反馈 | Light |
| 任务完成 | 成功反馈 | Medium |
| 计时器结束 | 提示反馈 | Heavy |
| 删除操作 | 警告反馈 | Heavy |

### 8.2 声音反馈（Sound）
| 场景 | 声音类型 | 音量 |
|------|----------|------|
| 计时器开始 | 清脆 "滴" 声 | 50% |
| 计时器暂停 | 低沉 "咚" 声 | 50% |
| 休息开始 | 舒缓铃声 | 60% |
| 倒计时结束 | 清脆铃声 | 80% |

### 8.3 状态指示
- **加载中**：Spinner + 文案（"Loading..."）
- **无网络**：图标 + 文案（"No network connection"）
- **空数据**：插图 + 文案 + 行动按钮
- **错误状态**：错误图标 + 错误信息 + 重试按钮

---

## 9. 可访问性（Accessibility）

### 9.1 颜色对比度
- **所有文本**：与背景对比度 ≥ 4.5:1
- **大号文本**（≥ 18sp）：对比度 ≥ 3:1
- **图标**：对比度 ≥ 3:1

### 9.2 触控目标
- **最小尺寸**：48dp × 48dp
- **推荐尺寸**：56dp × 56dp（主要按钮）
- **间距**：相邻触控目标间距 ≥ 8dp

### 9.3 屏幕阅读器支持
- **标签**：所有交互元素添加 `aria-label` 或 `accessibilityLabel`
- **角色**：按钮标记为 "button"，输入框标记为 "textfield"
- **状态**：选中/未选中/禁用状态明确标注

---

## 10. 设计交付资源

### 10.1 设计文件
- **Figma 源文件**：[Focus App Design](https://www.figma.com/make/jEnyNbwbbfW22y9kEwjNWP/Focus-App)
- **组件库**：包含所有可复用组件（按钮、卡片、输入框等）
- **原型**：完整交互流程演示

### 10.2 开发资源
- **图标集**：SVG 格式，支持多尺寸（24dp, 32dp, 48dp）
- **颜色变量**：已定义为代码常量（见 `common/theme.ets`）
- **字体文件**：HarmonyOS Sans（系统自带，无需额外引入）

### 10.3 切图规范
- **格式**：PNG（透明背景）、SVG（矢量图标）
- **倍率**：@1x, @2x, @3x（适配不同屏幕密度）
- **命名规则**：`ic_[名称]_[颜色]_[尺寸].png`
  - 示例：`ic_play_green_48.png`

---

## 11. 更新日志

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| 1.0 | 2025-12-17 | 初始版本，完整交互逻辑与UI规范 |

---

**文档维护者**：Focus App 设计团队  
**反馈渠道**：提交 Issue 或 Pull Request
